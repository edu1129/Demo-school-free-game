### यह कैसे तय होता है कि कौन सा रिक्वेस्ट किस GAS_URL पर भेजना है?

हमारे सिस्टम में, यह तय करने की प्रक्रिया कई चरणों में होती है कि कौन सा रिक्वेस्ट किस Google Apps Script (GAS) URL पर जाएगा। यह सब हमारे Node.js सर्वर (`app.js` फ़ाइल) और फ्रंटएंड (HTML फ़ाइलों) के बीच समन्वय से होता है।

आइए इसे स्टेप-बाय-स्टेप समझते हैं:

**1. अलग-अलग कामों के लिए अलग-अलग Google Apps Script (GAS) फाइलें:**

हमारे पास तीन मुख्य GAS फाइलें हैं, और हर एक को अलग-अलग काम के लिए बनाया गया है:
*   `Code.gs`: यह मुख्य स्क्रिप्ट है जो स्कूल रजिस्ट्रेशन, लॉगिन, छात्र/स्टाफ जोड़ने, डैशबोर्ड डेटा लाने जैसे लगभग सभी सामान्य काम करती है।
*   `Code2.gs`: यह स्क्रिप्ट विशेष रूप से छात्रों की बकाया फीस (dues) की सूची लाने के लिए है।
*   `Code3.gs`: यह स्क्रिप्ट एक एडमिन टूल है जो किसी स्कूल की स्प्रेडशीट का सारा डेटा एक साथ दिखाने के लिए है।

इन तीनों स्क्रिप्ट को Google Apps Script पर अलग-अलग वेब ऐप के रूप में डिप्लॉय (deploy) किया गया है, जिससे हमें तीन अलग-अलग `GAS_URL` मिलते हैं।

**2. Node.js सर्वर में URL कॉन्फ़िगरेशन (`app.js`):**

हमारा Node.js सर्वर इन तीनों URL को एनवायरनमेंट वेरिएबल्स (environment variables) से लोड करता है:
*   `GAS_URL`: यह `Code.gs` का URL है।
*   `GAS_URL2`: यह `Code2.gs` का URL है।
*   `GAS_URL3`: यह `Code3.gs` का URL है।

**3. सर्वर पर अलग-अलग API रास्ते (Routes):**

सर्वर (`app.js`) पर हमने तीन अलग-अलग API रास्ते (endpoints) बनाए हैं, जो इन URLs से जुड़े हैं:
*   `/api`: जब कोई रिक्वेस्ट इस रास्ते पर आती है, तो सर्वर उसे `GAS_URL` (`Code.gs`) पर भेजता है।
*   `/api2`: इस रास्ते पर आने वाली रिक्वेस्ट `GAS_URL2` (`Code2.gs`) पर भेजी जाती है।
*   `/api3`: इस रास्ते पर आने वाली रिक्वेस्ट `GAS_URL3` (`Code3.gs`) पर भेजी जाती है।

**4. फ्रंटएंड (HTML फाइल्स) तय करता है कि कौन सा रास्ता कॉल करना है:**

असली निर्णय फ्रंटएंड पर होता है। यूजर जो काम करना चाहता है, उसके आधार पर संबंधित HTML फाइल सही API रास्ते पर रिक्वेस्ट भेजती है।

*   **`index.html` (मुख्य डैशबोर्ड):** इस फाइल में मौजूद जावास्क्रिप्ट (`callBackendAPI` फंक्शन) लगभग सभी रिक्वेस्ट `/api` पर भेजती है। इसका मतलब है कि लॉगिन, छात्र जोड़ना, डैशबोर्ड डेटा लाना, ये सभी काम `Code.gs` द्वारा संभाले जाते हैं।

*   **`list.html` (Dues List पेज):** यह पेज विशेष रूप से बकाया फीस देखने के लिए है। इसलिए, इसमें मौजूद जावास्क्रिप्ट (`fetchDuesAutomatically` फंक्शन) अपनी रिक्वेस्ट `/api2` पर भेजती है। सर्वर इस रिक्वेस्ट को `Code2.gs` को फॉरवर्ड कर देता है, जो बकाया फीस की गणना करता है।

*   **`data.html` (Data Viewer पेज):** यह पेज पूरा स्प्रेडशीट डेटा देखने के लिए है। इसलिए, इसकी जावास्क्रिप्ट (`fetchSheetDataAutomatically` फंक्शन) `/api3` पर रिक्वेस्ट भेजती है, जिसे सर्वर `Code3.gs` को भेजता है।

**सारांश (Summary):**

1.  **फ्रंटएंड (HTML फाइल)** यूजर के एक्शन के आधार पर एक API रास्ता (`/api`, `/api2`, या `/api3`) चुनता है।
2.  **Node.js सर्वर** उस रास्ते के आधार पर तय करता है कि रिक्वेस्ट को कौन से `GAS_URL` पर भेजना है।
3.  **संबंधित GAS स्क्रिप्ट** (`Code.gs`, `Code2.gs`, या `Code3.gs`) रिक्वेस्ट को प्रोसेस करती है और जवाब देती है।

इस तरह, हमने कामों को अलग-अलग स्क्रिप्ट में बांटकर सिस्टम को व्यवस्थित और कुशल बनाया है।
